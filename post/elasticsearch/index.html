<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.73.0" />

  <title>ElasticSearch 기본 동작 이해 &middot; WOOKLOG</title>

  <meta name="description" content="" />

  

<meta itemprop="name" content="ElasticSearch 기본 동작 이해">
<meta itemprop="description" content="ElasticSearch 기본 동작 이해 참고링크
ElasticSearch는 오픈 소스이고 REST 기반의 실시간 검색 및 분석 엔진이다. Java로 작성되어졌으며 아파치 Lucene기반으로 검색 및 REST-Based API를 지원한다.">
<meta itemprop="datePublished" content="2020-08-03T22:40:00&#43;09:00" />
<meta itemprop="dateModified" content="2020-08-03T22:40:00&#43;09:00" />
<meta itemprop="wordCount" content="353">



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ElasticSearch 기본 동작 이해"/>
<meta name="twitter:description" content="ElasticSearch 기본 동작 이해 참고링크
ElasticSearch는 오픈 소스이고 REST 기반의 실시간 검색 및 분석 엔진이다. Java로 작성되어졌으며 아파치 Lucene기반으로 검색 및 REST-Based API를 지원한다."/>


<meta property="og:title" content="ElasticSearch 기본 동작 이해" />
<meta property="og:description" content="ElasticSearch 기본 동작 이해 참고링크
ElasticSearch는 오픈 소스이고 REST 기반의 실시간 검색 및 분석 엔진이다. Java로 작성되어졌으며 아파치 Lucene기반으로 검색 및 REST-Based API를 지원한다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://changwookyang.github.io/post/elasticsearch/" />
<meta property="article:published_time" content="2020-08-03T22:40:00+09:00" />
<meta property="article:modified_time" content="2020-08-03T22:40:00+09:00" />



  <link type="text/css"
        rel="stylesheet"
        href="/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="/css/hyde.css">

  


  

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
      

      <h1>WOOKLOG</h1>

      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://changwookyang.github.io/">Home</a>
        </li>
        
      </ul>
    </nav>

    <section class="social-icons">
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>ElasticSearch 기본 동작 이해</h1>

  <div class="post-date">
    <time datetime="2020-08-03T22:40:00&#43;0900">Aug 3, 2020</time>
  </div>

  <h3 id="elasticsearch-기본-동작-이해">ElasticSearch 기본 동작 이해</h3>
<p><a href="https://lng1982.tistory.com/283">참고링크</a></p>
<p>ElasticSearch는 오픈 소스이고 <strong>REST 기반의 실시간 검색 및 분석 엔진</strong>이다.
Java로 작성되어졌으며 아파치 Lucene기반으로 검색 및 REST-Based API를 지원한다.</p>
<h4 id="elasticsearch-저장-구조">ElasticSearch 저장 구조</h4>
<p>Index, Type, Document, Field, Mapping 용어들이 존재한다.</p>
<ul>
<li>Index란?
<ul>
<li>RDB의 데이터베이스와 유사하다.</li>
</ul>
</li>
<li>Type이란?
<ul>
<li>RDB의 테이블과 유사하다.</li>
</ul>
</li>
<li>Document란?
<ul>
<li>테이블이 ROW와 유사하다.</li>
<li>JSON 문서로 되어있다. (key, value)</li>
</ul>
</li>
<li>Field란?
<ul>
<li>엘라스틱 서치의 문서는 JSON이다.</li>
<li>JSON의 프로퍼티를 엘라스틱 서치에서는 필드라고 부른다.</li>
<li>RDB 테이블의 컬럼과 유사하다.</li>
</ul>
</li>
<li>Mapping이란?
<ul>
<li>RDB의 스키마와 유사하다.</li>
<li>http://localhost:9200/nklee/phone/1 POST 요청</li>
<li>아래 JSON 데이터를 함께 전송하면 Elastic Search에서 mapping을 자동으로 생성해준다.
{
&ldquo;number&rdquo;: &ldquo;010-1111-1111&rdquo;,
&ldquo;author&rdquo;:&ldquo;nklee&rdquo;
}</li>
</ul>
</li>
</ul>
<p>[Mapping 구조]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile10.uf.tistory.com%2Fimage%2F99A4C43359A769361E05F2" alt="이미지"></p>
<p>[저장구조]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile8.uf.tistory.com%2Fimage%2F9969723359A75D4D3246AD" alt="이미지"></p>
<p>ElasticSearch REST API URL 포맷은 다음과 같다.</p>
<blockquote>
<p>http://{Node:PortNumber}/{Index}/{Type}</p>
</blockquote>
<p>Index는 소문자여야 한다.
Type은 Index와 마찬가지로 소문자를 추천한다.</p>
<hr>
<h4 id="기본동작-테스트">기본동작 테스트</h4>
<blockquote>
<p>GET : 조회, POST : 저장, PUT : 수정, DELETE : 삭제</p>
</blockquote>
<p><strong>저장하기</strong>
[POST]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile3.uf.tistory.com%2Fimage%2F9958443359A75DDC2AFC1E" alt="이미지">
nklee 인덱스의 phone타입에 1이라는 아이디로 저장했다는 의미이다.
[결과값]</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JSON" data-lang="JSON">{
    <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
    <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
    <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
    <span style="color:#f92672">&#34;_version&#34;</span>: <span style="color:#ae81ff">1</span>,
    <span style="color:#f92672">&#34;_shards&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">2</span>,
        <span style="color:#f92672">&#34;successful&#34;</span>: <span style="color:#ae81ff">1</span>,
        <span style="color:#f92672">&#34;failed&#34;</span>: <span style="color:#ae81ff">0</span>
    },
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#66d9ef">true</span>
}
</code></pre></div><p><strong>조회하기</strong>
[GET]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile6.uf.tistory.com%2Fimage%2F994E4B3359A75DDC2B6EB3" alt="이미지">
위에서 저장한 데이터를 조회하면 다음과 같이 JSON 결과값이 출력된다.
[결과값]</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JSON" data-lang="JSON">{
    <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
    <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
    <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
    <span style="color:#f92672">&#34;_version&#34;</span>: <span style="color:#ae81ff">1</span>,
    <span style="color:#f92672">&#34;found&#34;</span>: <span style="color:#66d9ef">true</span>,
    <span style="color:#f92672">&#34;_source&#34;</span>: {
        <span style="color:#f92672">&#34;number&#34;</span>: <span style="color:#e6db74">&#34;010-1111-1111&#34;</span>,
        <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>
    }
}
</code></pre></div><p><strong>수정하기</strong>
[PUT]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile10.uf.tistory.com%2Fimage%2F99C08F3359A75DDC30F380" alt="이미지"></p>
<p>이미 저장되어있는 author 값을 변경해서 요청
[결과값]</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JSON" data-lang="JSON">{
    <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
    <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
    <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
    <span style="color:#f92672">&#34;_version&#34;</span>: <span style="color:#ae81ff">3</span>,
    <span style="color:#f92672">&#34;_shards&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">2</span>,
        <span style="color:#f92672">&#34;successful&#34;</span>: <span style="color:#ae81ff">1</span>,
        <span style="color:#f92672">&#34;failed&#34;</span>: <span style="color:#ae81ff">0</span>
    },
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#66d9ef">false</span>
}
</code></pre></div><p><strong>모두 검색하기</strong>
[GET]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile30.uf.tistory.com%2Fimage%2F99CD7A3359A75DDC25B532" alt="이미지"></p>
<p>저장되어있는 데이터 모두가 출력된다.
[결과값]</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JSON" data-lang="JSON">{
    <span style="color:#f92672">&#34;took&#34;</span>: <span style="color:#ae81ff">3</span>,
    <span style="color:#f92672">&#34;timed_out&#34;</span>: <span style="color:#66d9ef">false</span>,
    <span style="color:#f92672">&#34;_shards&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">5</span>,
        <span style="color:#f92672">&#34;successful&#34;</span>: <span style="color:#ae81ff">5</span>,
        <span style="color:#f92672">&#34;failed&#34;</span>: <span style="color:#ae81ff">0</span>
    },
    <span style="color:#f92672">&#34;hits&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">2</span>,
        <span style="color:#f92672">&#34;max_score&#34;</span>: <span style="color:#ae81ff">1</span>,
        <span style="color:#f92672">&#34;hits&#34;</span>: [
            {
                <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
                <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
                <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;2&#34;</span>,
                <span style="color:#f92672">&#34;_score&#34;</span>: <span style="color:#ae81ff">1</span>,
                <span style="color:#f92672">&#34;_source&#34;</span>: {
                    <span style="color:#f92672">&#34;number&#34;</span>: <span style="color:#e6db74">&#34;010-1111-1111&#34;</span>,
                    <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>
                }
            },
            {
                <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
                <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
                <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
                <span style="color:#f92672">&#34;_score&#34;</span>: <span style="color:#ae81ff">1</span>,
                <span style="color:#f92672">&#34;_source&#34;</span>: {
                    <span style="color:#f92672">&#34;number&#34;</span>: <span style="color:#e6db74">&#34;010-1111-1111&#34;</span>,
                    <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;nklee22&#34;</span>
                }
            }
        ]
    }
}
</code></pre></div><p><strong>조건 검색하기</strong>
[GET]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile29.uf.tistory.com%2Fimage%2F99AB003359A75DDD31FAAA" alt="이미지">
q 파라미터를 이용하여 조건 검색이 가능하다</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JSON" data-lang="JSON">{
    <span style="color:#f92672">&#34;took&#34;</span>: <span style="color:#ae81ff">2</span>,
    <span style="color:#f92672">&#34;timed_out&#34;</span>: <span style="color:#66d9ef">false</span>,
    <span style="color:#f92672">&#34;_shards&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">5</span>,
        <span style="color:#f92672">&#34;successful&#34;</span>: <span style="color:#ae81ff">5</span>,
        <span style="color:#f92672">&#34;failed&#34;</span>: <span style="color:#ae81ff">0</span>
    },
    <span style="color:#f92672">&#34;hits&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">1</span>,
        <span style="color:#f92672">&#34;max_score&#34;</span>: <span style="color:#ae81ff">0.33912507</span>,
        <span style="color:#f92672">&#34;hits&#34;</span>: [
            {
                <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
                <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
                <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
                <span style="color:#f92672">&#34;_score&#34;</span>: <span style="color:#ae81ff">0.33912507</span>,
                <span style="color:#f92672">&#34;_source&#34;</span>: {
                    <span style="color:#f92672">&#34;number&#34;</span>: <span style="color:#e6db74">&#34;010-1111-1111&#34;</span>,
                    <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;nklee22&#34;</span>
                }
            }
        ]
    }
}
</code></pre></div><p><strong>삭제</strong>
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=http%3A%2F%2Fcfile27.uf.tistory.com%2Fimage%2F9938463359A75DDD2C5E25" alt="이미지"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JSON" data-lang="JSON">{
    <span style="color:#f92672">&#34;found&#34;</span>: <span style="color:#66d9ef">false</span>,
    <span style="color:#f92672">&#34;_index&#34;</span>: <span style="color:#e6db74">&#34;nklee&#34;</span>,
    <span style="color:#f92672">&#34;_type&#34;</span>: <span style="color:#e6db74">&#34;phone&#34;</span>,
    <span style="color:#f92672">&#34;_id&#34;</span>: <span style="color:#e6db74">&#34;2&#34;</span>,
    <span style="color:#f92672">&#34;_version&#34;</span>: <span style="color:#ae81ff">3</span>,
    <span style="color:#f92672">&#34;_shards&#34;</span>: {
        <span style="color:#f92672">&#34;total&#34;</span>: <span style="color:#ae81ff">2</span>,
        <span style="color:#f92672">&#34;successful&#34;</span>: <span style="color:#ae81ff">1</span>,
        <span style="color:#f92672">&#34;failed&#34;</span>: <span style="color:#ae81ff">0</span>
    }
}
</code></pre></div>
</div>

<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "wookchangyang" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </main>

  <footer>
  <div>
    &copy;  2020

    

    
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-172670101-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>
</html>
